<!DOCTYPE html>
<html
  lang="en"
  xmlns:th="http://www.thymeleaf.org"
  th:replace="layout/base :: page('New Post', ~{::section})"
>
  <section>
    <div class="bg-white border rounded-4 p-4">
      <h1 class="h5 mb-3">Submit a Post</h1>
      <p class="small text-muted">
        Your post will be visible after admin approval.
      </p>
      <div class="small text-muted mb-3" th:if="${currentUser != null}">
        Posting as
        <span class="fw-semibold" th:text="${currentUser.username}">user</span>
        <span th:text="' (' + ${currentUser.email} + ')'">(email)</span>
      </div>

      <form
        th:action="@{/posts/new}"
        th:object="${form}"
        method="post"
        class="vstack gap-3"
      >
        <input
          type="hidden"
          th:name="${_csrf.parameterName}"
          th:value="${_csrf.token}"
        />

        <div>
          <label class="form-label">Title</label>
          <input class="form-control" th:field="*{title}" />
          <div class="text-danger small" th:errors="*{title}"></div>
        </div>

        <div>
          <label class="form-label">Content</label>
          <textarea
            class="form-control"
            rows="6"
            th:field="*{content}"
          ></textarea>
          <div class="text-danger small" th:errors="*{content}"></div>
        </div>

        <div class="d-flex gap-2">
          <button class="btn btn-dark">Submit</button>
          <a class="btn btn-outline-secondary" th:href="@{/posts}">Cancel</a>
        </div>
      </form>
    </div>
  </section>
</html>
