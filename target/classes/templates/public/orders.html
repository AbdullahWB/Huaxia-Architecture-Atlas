<!DOCTYPE html>
<html
  lang="en"
  xmlns:th="http://www.thymeleaf.org"
  th:replace="layout/base :: page('My Orders', ~{::section})"
>
  <section class="hx-section">
    <div class="d-flex align-items-center justify-content-between mb-3">
      <div>
        <h1 class="h4 mb-1">My Orders</h1>
        <p class="text-muted mb-0">Track your purchases and order status.</p>
      </div>
      <a class="btn btn-outline-secondary btn-sm" th:href="@{/products}">Back to products</a>
    </div>

    <div class="hx-card">
      <div class="table-responsive">
        <table class="table table-hover align-middle mb-0">
          <thead class="table-light">
            <tr>
              <th style="width: 70px">ID</th>
              <th>Product</th>
              <th style="width: 110px">Qty</th>
              <th style="width: 140px">Total</th>
              <th style="width: 140px">Status</th>
              <th style="width: 140px">Date</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="o : ${items}">
              <td th:text="${o.id}">1</td>
              <td th:text="${o.product.name}">Product</td>
              <td th:text="${o.quantity}">1</td>
              <td th:text="'$' + ${#numbers.formatDecimal(o.totalPrice, 1, 2)}">$0.00</td>
              <td><span class="badge text-bg-light border" th:text="${o.status}">PENDING</span></td>
              <td th:text="${#temporals.format(o.createdAt, 'yyyy-MM-dd')}">2026-01-18</td>
            </tr>
            <tr th:if="${items == null || #lists.isEmpty(items)}">
              <td colspan="6" class="text-center text-muted py-4">No orders yet.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div
      class="d-flex justify-content-between align-items-center mt-3"
      th:if="${page != null and page.totalPages > 1}"
    >
      <a
        class="btn btn-outline-secondary btn-sm"
        th:classappend="${page.first} ? 'disabled'"
        th:href="@{/orders(page=${page.number-1}, size=${page.size})}"
      >
        Prev
      </a>

      <div class="small text-muted">
        Page <span th:text="${page.number + 1}">1</span> /
        <span th:text="${page.totalPages}">1</span>
      </div>

      <a
        class="btn btn-outline-secondary btn-sm"
        th:classappend="${page.last} ? 'disabled'"
        th:href="@{/orders(page=${page.number+1}, size=${page.size})}"
      >
        Next
      </a>
    </div>
  </section>
</html>
