<!DOCTYPE html>
<html
  lang="en"
  xmlns:th="http://www.thymeleaf.org"
  th:replace="layout/base :: page(${building.name}, ~{::section})"
>
  <section>
    <div class="row g-4">
      <div class="col-lg-7">
        <div class="bg-white border rounded-4 p-4">
          <div class="d-flex flex-wrap gap-2 mb-2">
            <span
              class="badge text-bg-light border"
              th:text="${building.dynasty} ?: '-'"
              >Dynasty</span
            >
            <span
              class="badge text-bg-light border"
              th:text="${building.type} ?: '-'"
              >Type</span
            >
            <span
              class="badge text-bg-light border"
              th:text="${building.location} ?: '-'"
              >Location</span
            >
            <span
              class="badge text-bg-light border"
              th:text="${building.yearBuilt} ?: '-'"
              >Year</span
            >
          </div>

          <h1 class="h3 mb-3" th:text="${building.name}">Name</h1>

          <img
            th:if="${building.coverImage}"
            th:src="@{${building.coverImage}}"
            class="img-fluid rounded-4 border mb-3"
            alt="cover"
          />

          <h2 class="h6 text-muted mb-2">Description</h2>
          <p
            class="mb-0"
            th:text="${building.description} ?: 'No description yet.'"
          ></p>

          <div class="mt-3" th:if="${building.tags}">
            <div class="small text-muted mb-1">Tags</div>
            <span
              class="badge text-bg-light border me-1"
              th:each="t : ${#strings.arraySplit(building.tags, ',')}"
              th:text="${#strings.trim(t)}"
              >tag</span
            >
          </div>
        </div>
      </div>

      <div class="col-lg-5">
        <div class="bg-white border rounded-4 p-4">
          <h2 class="h6 mb-3">Related buildings (AI)</h2>

          <div class="vstack gap-2" th:if="${#lists.size(related) > 0}">
            <a
              class="text-decoration-none"
              th:each="r : ${related}"
              th:href="@{/buildings/{id}(id=${r.id})}"
            >
              <div class="border rounded-3 p-3 hover-card">
                <div
                  class="small text-muted"
                  th:text="${r.dynasty} + ' · ' + ${r.type}"
                >
                  Dynasty · Type
                </div>
                <div class="fw-semibold" th:text="${r.name}">Name</div>
                <div class="small text-muted" th:text="${r.location}">
                  Location
                </div>
              </div>
            </a>
          </div>

          <div class="text-muted small" th:if="${#lists.size(related) == 0}">
            No related items found yet.
          </div>
        </div>

        <div class="bg-white border rounded-4 p-4 mt-3">
          <h2 class="h6 mb-2">Ask AI about this</h2>
          <a class="btn btn-dark btn-sm" th:href="@{/chat}">Open AI Chat</a>
        </div>
      </div>
    </div>
  </section>
</html>
